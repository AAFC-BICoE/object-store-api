<?xml version="1.1" encoding="UTF-8" standalone="no" ?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.6.xsd"
                   objectQuotingStrategy="QUOTE_ONLY_RESERVED_WORDS">

    <changeSet id="24-ObjectUpload_track_isDerivative" context="schema-change" author="KeyukJ">
        <!--        Add columns-->
        <addColumn tableName="object_upload">
            <column name="is_derivative" type="boolean"/>
        </addColumn>

        <!--        Migrate old records-->
        <update tableName="object_upload">
            <column name="is_derivative" value="false"/>
        </update>

        <!--        Add not null-->
        <addNotNullConstraint tableName="object_upload" columnName="is_derivative"/>
    </changeSet>

</databaseChangeLog>
